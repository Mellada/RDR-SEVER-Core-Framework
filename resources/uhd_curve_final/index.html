<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="hud">

<div class="icon" id="brain">
<svg viewBox="0 0 36 36">
<circle class="bg" cx="18" cy="18" r="15"/>
<circle class="fg" cx="18" cy="18" r="15"/>
</svg>
<img src="img/brain.png">
</div>

<div class="icon" id="apple">
<svg viewBox="0 0 36 36">
<circle class="bg" cx="18" cy="18" r="15"/>
<circle class="fg" cx="18" cy="18" r="15"/>
</svg>
<img src="img/apple.png">
</div>

<div class="icon" id="water">
<svg viewBox="0 0 36 36">
<circle class="bg" cx="18" cy="18" r="15"/>
<circle class="fg" cx="18" cy="18" r="15"/>
</svg>
<img src="img/water.png">
</div>

<div class="icon" id="temp">
<svg viewBox="0 0 36 36">
<circle class="bg" cx="18" cy="18" r="15"/>
<circle class="fg" cx="18" cy="18" r="15"/>
</svg>
<img src="img/hot.png">
</div>

</div>

<script>

const FULL = 94

window.addEventListener('message',function(e){

if(e.data.type=="update"){

const d = e.data.data

setCircle("brain",-60,d.stress)
setCircle("apple",-25,d.food)
setCircle("water",10,d.water)
setCircle("temp",45,d.temp,true)   // â­ temp à¸ªà¹ˆà¸‡ true

}
})

function setCircle(id,angle,val,isTemp){

const el = document.getElementById(id)
if(!el) return

const cx = 245      // à¸‚à¸¢à¸±à¸š-à¹€à¸‚à¹‰à¸² minimap edge
const cy = window.innerHeight - 155    //à¸„à¸§à¸šà¸„à¸¸à¸¡à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡ â€œà¹à¸™à¸§à¸•à¸±à¹‰à¸‡â€
const r  = 88     // à¸§à¸²à¸‡à¸­à¸­à¸à¹„à¸›à¸”à¹‰à¸²à¸™à¸‚à¹‰à¸²à¸‡

const rad = angle*Math.PI/180

el.style.left = (cx + Math.cos(rad)*r)+"px"
el.style.top  = (cy + Math.sin(rad)*r)+"px"

const fg = el.querySelector(".fg")

const pct = Math.max(0,Math.min(100,val))
const dash = FULL*(pct/100)

fg.style.strokeDasharray = dash+" "+FULL

// â­ à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ªà¸µà¹€à¸‰à¸žà¸²à¸° temp
if(isTemp){

    if(val >= 35){
        fg.style.stroke = "#ff4b4b"   // ðŸ”´ à¸£à¹‰à¸­à¸™
    }
    else if(val <= -5){
        fg.style.stroke = "#5bbcff"   // ðŸ”µ à¸«à¸™à¸²à¸§
    }
    else{
        fg.style.stroke = "#ffffff"   // âšª à¸›à¸à¸•à¸´
    }

}

}

</script>

</body>
</html>